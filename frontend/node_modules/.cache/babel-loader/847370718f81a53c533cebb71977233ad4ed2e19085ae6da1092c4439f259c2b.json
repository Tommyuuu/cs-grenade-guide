{"ast":null,"code":"import NavBar from '@/components/NavBar.vue';\nimport ChatRoom from '@/components/ChatRoom.vue';\nimport { useUserStore } from '@/stores/user';\nimport axios from 'axios';\nexport default {\n  components: {\n    NavBar,\n    ChatRoom\n  },\n  props: ['mapName'],\n  data() {\n    return {\n      selectedGrenade: '',\n      // 目前還可保留（可加切換類型功能）\n      selectedPoint: null,\n      // 使用者點選的點位（包含名稱與 methods）\n      selectedMethod: '',\n      // 被選中的影片網址\n      videoUrl: '',\n      // 真正播放的影片 URL\n      points: [],\n      selectedMethodPanelVisible: false,\n      grenadeTypes: ['smoke', 'flash', 'molotov'],\n      tempxy: null,\n      isAddP: false,\n      showAddPForm: false,\n      showAddForm: false,\n      showChat: true,\n      newMethodName: '',\n      newMethodURL: ''\n    };\n  },\n  watch: {\n    selectedGrenade(newVal) {\n      if (newVal) {\n        // 根據目前選的地圖與道具，向後端取得點位資訊\n        axios.get(`/maps/${this.mapName}/${newVal}/points`).then(res => {\n          this.points = res.data;\n          this.selectedPoint = null;\n          this.selectedMethod = '';\n          this.videoUrl = '';\n          this.tempxy = null;\n          this.isAddP = false;\n          this.showAddPForm = false;\n          this.showAddForm = false;\n        }).catch(err => {\n          console.error('載入點位失敗：', err);\n        });\n      } else {\n        this.points = [];\n      }\n    }\n  },\n  computed: {\n    // ✅ 計算屬性來決定是否登入\n    account_session() {\n      const userStore = useUserStore();\n      return userStore.isLoggedIn && (userStore.role === 'admin' || userStore.role === 'user');\n    },\n    username() {\n      return useUserStore().username;\n    }\n  },\n  methods: {\n    selectUsagePoint(point) {\n      this.selectedPoint = point;\n      this.selectedUsage = '';\n      this.videoUrl = '';\n      this.showAddForm = false;\n      this.showAddPForm = false;\n      this.newPostionName = '';\n      this.newMethodName = '';\n      this.newMethodURL = '';\n      this.isAddP = false;\n      this.selectedMethodPanelVisible = point.methods?.length > 1;\n\n      // 多種丟法 => 顯示選單\n      if (point.methods.length > 1) {\n        this.usages = point.methods;\n        this.tempxy = null;\n      }\n      // 一種丟法 => 直接顯示影片\n      else if (point.methods.length === 1) {\n        this.videoUrl = point.methods[0].video_url;\n        this.tempxy = null;\n      }\n    },\n    isYoutube(url) {\n      return url.includes('youtube.com') || url.includes('youtu.be');\n    },\n    embedYoutube(url) {\n      if (url.includes('/shorts/')) {\n        const id = url.split('/shorts/')[1].split('?')[0];\n        return `https://www.youtube.com/embed/${id}`;\n      } else if (url.includes('watch?v=')) {\n        const id = url.split('watch?v=')[1].split('&')[0];\n        return `https://www.youtube.com/embed/${id}`;\n      } else if (url.includes('youtu.be/')) {\n        const id = url.split('youtu.be/')[1].split('?')[0];\n        return `https://www.youtube.com/embed/${id}`;\n      } else {\n        return ''; // 無效網址處理\n      }\n    },\n    fetchVideoFromPoint() {\n      this.videoUrl = this.selectedMethod;\n      this.selectedMethodPanelVisible = false;\n    },\n    submitNewMethod() {\n      if (!this.newMethodName || !this.newMethodURL) {\n        alert('請填寫完整資訊');\n        return;\n      }\n      const payload = {\n        map: this.mapName,\n        grenade_type: this.selectedGrenade,\n        point_name: this.selectedPoint.name,\n        x: this.selectedPoint.x,\n        y: this.selectedPoint.y,\n        method: {\n          name: this.newMethodName,\n          video_url: this.newMethodURL\n        }\n      };\n      axios.post('/submit_method', payload).then(() => {\n        alert('送出成功，等待審核');\n        this.showAddForm = false;\n        this.newMethodName = '';\n        this.newMethodURL = '';\n      }).catch(err => {\n        console.error('送出失敗', err);\n        alert('發生錯誤，請稍後再試');\n      });\n    },\n    MapClick(event) {\n      if (!this.isAddP) return;\n      this.showAddForm = false;\n      this.showAddPForm = true;\n      this.videoUrl = '';\n      const rect = event.target.getBoundingClientRect();\n      const x = Math.round(event.clientX - rect.left);\n      const y = Math.round(event.clientY - rect.top);\n      this.tempxy = {\n        x,\n        y\n      };\n      this.selectedPoint = null;\n    },\n    cancel_npm() {\n      this.tempxy = null;\n      this.showAddPForm = false;\n      this.isAddP = false;\n    },\n    submitNewPostionMethod() {\n      if (!this.newPostionName || !this.newMethodName || !this.newMethodURL) {\n        alert('請填寫完整資訊');\n        return;\n      }\n      const {\n        x,\n        y\n      } = this.tempxy;\n      const payload = {\n        map: this.mapName,\n        grenade_type: this.selectedGrenade,\n        point_name: this.newPostionName,\n        x,\n        y,\n        method: {\n          name: this.newMethodName,\n          video_url: this.newMethodURL\n        }\n      };\n      axios.post('/submit_method', payload).then(() => {\n        alert('送出成功，等待審核');\n        this.isAddP = false;\n        this.tempxy = null;\n        this.showAddPForm = false;\n        this.newPostionName = '';\n        this.newMethodName = '';\n        this.newMethodURL = '';\n      }).catch(err => {\n        console.error('送出失敗', err);\n        alert('發生錯誤，請稍後再試');\n      });\n    }\n  }\n};","map":{"version":3,"names":["NavBar","ChatRoom","useUserStore","axios","components","props","data","selectedGrenade","selectedPoint","selectedMethod","videoUrl","points","selectedMethodPanelVisible","grenadeTypes","tempxy","isAddP","showAddPForm","showAddForm","showChat","newMethodName","newMethodURL","watch","newVal","get","mapName","then","res","catch","err","console","error","computed","account_session","userStore","isLoggedIn","role","username","methods","selectUsagePoint","point","selectedUsage","newPostionName","length","usages","video_url","isYoutube","url","includes","embedYoutube","id","split","fetchVideoFromPoint","submitNewMethod","alert","payload","map","grenade_type","point_name","name","x","y","method","post","MapClick","event","rect","target","getBoundingClientRect","Math","round","clientX","left","clientY","top","cancel_npm","submitNewPostionMethod"],"sources":["C:\\Users\\tangchi\\OneDrive\\桌面\\Code\\sidep\\frontend\\src\\views\\MapDetail.vue"],"sourcesContent":["<template>\r\n  <NavBar :title=\"`${mapName} - 道具教學`\" />\r\n  <div class=\"esports-bg text-white min-vh-100 py-5\">\r\n\r\n  <!-- 主頁面容器 --> \r\n  <div class=\"container py-4 text-white esports-bg position-relative\">\r\n    <!-- 地圖圖像 + 工具列區塊 -->\r\n    <div class=\"card esports-card p-3 bg-dark mb-4 position-relative\">\r\n      <!-- 工具列（嵌入地圖卡片上方） -->\r\n      <div class=\"d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <label for=\"grenadeSelect\" class=\"form-label text-light me-2 mb-0\">選擇道具：</label>\r\n          <select id=\"grenadeSelect\" class=\"form-select bg-dark text-light border-secondary w-auto\" v-model=\"selectedGrenade\">\r\n            <option disabled value=\"\">請選擇道具</option>\r\n            <option v-for=\"type in grenadeTypes\" :key=\"type\">{{ type }}</option>\r\n          </select>\r\n        </div>\r\n        <!-- 新增點位丟法按鈕 -->\r\n        <div class=\"d-flex gap-2\">\r\n          <button \r\n            v-if=\"selectedGrenade && account_session\" \r\n            class=\"btn btn-outline-info\" \r\n            :class=\"{ active: isAddP}\" \r\n            @click=\"isAddP = true; selectedMethodPanelVisible = false;showAddForm = false\"\r\n            >➕ 新增點位丟法\r\n          </button>\r\n          <button\r\n            v-if=\"selectedPoint && account_session\"\r\n            class=\"btn btn-outline-warning \"\r\n            :class=\"{ active: showAddForm}\"\r\n            @click=\"showAddForm = true; selectedMethodPanelVisible = false;isAddP = false\"\r\n          >\r\n            ➕ 新增丟法\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 地圖圖像與標記 -->\r\n      <div class=\"position-relative mx-auto\" style=\"max-width: 800px\">\r\n        <img \r\n          :src=\"`/maps/${mapName.toLowerCase()}.png`\" \r\n          class=\"img-fluid\"\r\n          @click=\"MapClick\"\r\n        />\r\n        <!-- 點位渲染 -->\r\n        <button\r\n          v-for=\"(point, index) in points\"\r\n          :key=\"index\"\r\n          class=\"btn btn-info position-absolute translate-middle marker \"\r\n          :class=\"{ active: selectedPoint?.name === point.name }\"\r\n          :style=\"{ left: point.x + 'px', top: point.y + 'px' }\"\r\n          @click=\"selectUsagePoint(point)\"\r\n          :title=\"point.name\"\r\n        >📍</button>\r\n        <button\r\n          v-if=\"tempxy && tempxy.x !== undefined && tempxy.y !== undefined\"\r\n          class=\"position-absolute translate-middle marker-temp\"\r\n          :style=\"{ left: tempxy.x + 'px', top: tempxy.y + 'px'}\"\r\n          :title=\"暫存點\"\r\n          disabled\r\n        >📌</button>\r\n        \r\n      </div>\r\n    </div>\r\n\r\n    <!-- 點位丟法表單 -->\r\n    <div v-if=\"showAddPForm && tempxy.x !== undefined\" class=\"position-fixed top-50 start-50 translate-middle bg-dark text-white p-4 rounded shadow-lg\">\r\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h5 class=\"text-info\">新增點位丟法</h5>\r\n        <button class=\"btn-close btn-close-white\" @click=\"showAddPForm = false\"></button>\r\n      </div>\r\n      <input class=\"form-control mb-2\" v-model=\"newPostionName\" placeholder=\"點位名稱\" />\r\n      <input class=\"form-control mb-2\" v-model=\"newMethodName\" placeholder=\"丟法名稱\" />\r\n      <input class=\"form-control mb-2\" v-model=\"newMethodURL\" placeholder=\"影片網址\" />\r\n      <div class=\"d-flex gap-2\">\r\n        <button class=\"btn btn-success\" @click=\"submitNewPostionMethod()\">送出</button>\r\n        <button class=\"btn btn-secondary\" @click=\"cancel_npm()\">取消</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 丟法新增表單 -->\r\n    <div v-if=\"showAddForm\" class=\"position-fixed top-50 start-50 translate-middle bg-dark text-white p-4 rounded shadow-lg\">\r\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h5 class=\"text-info\">新增丟法：{{ selectedPoint.name }}</h5>\r\n        <button class=\"btn-close btn-close-white\" @click=\"showAddForm = false\"></button>\r\n      </div>\r\n      <input class=\"form-control mb-2\" v-model=\"newMethodName\" placeholder=\"丟法名稱\" />\r\n      <input class=\"form-control mb-2\" v-model=\"newMethodURL\" placeholder=\"影片網址\" />\r\n      <div class=\"d-flex gap-2\">\r\n        <button class=\"btn btn-success\" @click=\"submitNewMethod\">送出</button>\r\n        <button class=\"btn btn-secondary\" @click=\"showAddForm = false\">取消</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 彈出式丟法選單 -->\r\n    <div \r\n      v-if=\"selectedPoint && selectedPoint.methods.length > 1 && selectedMethodPanelVisible\"\r\n      class=\"position-fixed top-50 start-50 translate-middle bg-dark text-white p-4 rounded shadow-lg\"\r\n      style=\"z-index: 1050; min-width: 300px\"\r\n    >\r\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h5 class=\"text-info mb-0\">選擇丟法：{{ selectedPoint.name }}</h5>\r\n        <button class=\"btn-close btn-close-white\" @click=\"selectedMethodPanelVisible = false\"></button>\r\n      </div>\r\n      <select class=\"form-select\" v-model=\"selectedMethod\" @change=\"fetchVideoFromPoint\">\r\n        <option disabled value=\"\">請選擇丟法</option>\r\n        <option v-for=\"m in selectedPoint.methods\" :key=\"m.name\" :value=\"m.video_url\">\r\n          {{ m.name }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- 影片播放區 -->\r\n    <div v-if=\"videoUrl\" class=\"card bg-dark text-white p-3 mb-4\">\r\n      <h5 class=\"text-info mb-3\">🎮 影片播放</h5>\r\n      <div class=\"ratio ratio-16x9\">\r\n        <iframe\r\n          v-if=\"videoUrl.includes('youtube')\"\r\n          :src=\"embedYoutube(videoUrl)\"\r\n          allowfullscreen\r\n        ></iframe>\r\n        <video v-else class=\"w-100\" controls :src=\"videoUrl\"></video>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div>\r\n    <!-- 當聊天室被關閉，顯示右下角按鈕 -->\r\n    <button\r\n      v-if=\"!showChat\"\r\n      class=\"btn btn-secondary position-fixed bottom-0 end-0 m-3 z-3\"\r\n      @click=\"showChat = true\"\r\n    >\r\n      顯示聊天室\r\n    </button>\r\n\r\n    <!-- 聊天室元件 -->\r\n    <ChatRoom\r\n      v-if=\"showChat\"\r\n      :mapName=\"mapName\"\r\n      :username=\"username\"\r\n      @close=\"showChat = false\"\r\n    />\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport NavBar from '@/components/NavBar.vue'\r\nimport ChatRoom from '@/components/ChatRoom.vue'\r\nimport { useUserStore } from '@/stores/user'\r\nimport axios from 'axios';\r\nexport default {\r\n  components: { NavBar,ChatRoom },\r\n  props: ['mapName'],\r\n  data() {\r\n    return {\r\n      selectedGrenade: '',        // 目前還可保留（可加切換類型功能）\r\n      selectedPoint: null,        // 使用者點選的點位（包含名稱與 methods）\r\n      selectedMethod: '',         // 被選中的影片網址\r\n      videoUrl: '',               // 真正播放的影片 URL\r\n      points:[],\r\n      selectedMethodPanelVisible: false,\r\n      grenadeTypes: ['smoke', 'flash', 'molotov'],\r\n      tempxy:null,\r\n      isAddP:false,\r\n      showAddPForm: false,\r\n      showAddForm: false,\r\n      showChat: true,\r\n      newMethodName: '',\r\n      newMethodURL: '',\r\n    };\r\n  },\r\n\r\n  \r\n  watch: {\r\n    selectedGrenade(newVal) {\r\n        if (newVal) {\r\n        // 根據目前選的地圖與道具，向後端取得點位資訊\r\n        axios.get(`/maps/${this.mapName}/${newVal}/points`)\r\n            .then(res => {\r\n            this.points = res.data;\r\n            this.selectedPoint = null;\r\n            this.selectedMethod = '';\r\n            this.videoUrl = '';\r\n            this.tempxy=null;\r\n            this.isAddP=false;\r\n            this.showAddPForm= false;\r\n            this.showAddForm=false;\r\n            })\r\n            .catch(err => {\r\n            console.error('載入點位失敗：', err);\r\n            });\r\n        } else {\r\n        this.points = [];\r\n        }\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    // ✅ 計算屬性來決定是否登入\r\n    account_session() {\r\n      const userStore = useUserStore()\r\n      return userStore.isLoggedIn && ( userStore.role === 'admin' || userStore.role === 'user')\r\n    },\r\n    username(){\r\n      return useUserStore().username\r\n    }\r\n    \r\n  },\r\n\r\n  methods: {\r\n    selectUsagePoint(point) {\r\n        this.selectedPoint = point;\r\n        this.selectedUsage = '';\r\n        this.videoUrl = '';\r\n        this.showAddForm = false;\r\n        this.showAddPForm = false;\r\n        this.newPostionName = ''\r\n        this.newMethodName = '';\r\n        this.newMethodURL = '';\r\n        this.isAddP=false;\r\n        this.selectedMethodPanelVisible = point.methods?.length > 1;\r\n\r\n        // 多種丟法 => 顯示選單\r\n        if (point.methods.length > 1) {\r\n            this.usages = point.methods;\r\n            this.tempxy = null\r\n            }\r\n        // 一種丟法 => 直接顯示影片\r\n        else if (point.methods.length === 1) {\r\n            this.videoUrl = point.methods[0].video_url;\r\n            this.tempxy = null\r\n        }\r\n    },\r\n    isYoutube(url) {\r\n        return url.includes('youtube.com') || url.includes('youtu.be');\r\n    },\r\n    embedYoutube(url) {\r\n        if (url.includes('/shorts/')) {\r\n        const id = url.split('/shorts/')[1].split('?')[0];\r\n        return `https://www.youtube.com/embed/${id}`;\r\n        } else if (url.includes('watch?v=')) {\r\n        const id = url.split('watch?v=')[1].split('&')[0];\r\n        return `https://www.youtube.com/embed/${id}`;\r\n        } else if (url.includes('youtu.be/')) {\r\n        const id = url.split('youtu.be/')[1].split('?')[0];\r\n        return `https://www.youtube.com/embed/${id}`;\r\n        } else {\r\n        return ''; // 無效網址處理\r\n        }\r\n    },\r\n    \r\n    fetchVideoFromPoint() {\r\n      this.videoUrl = this.selectedMethod;\r\n      this.selectedMethodPanelVisible = false;\r\n    },\r\n\r\n    submitNewMethod() {\r\n        if (!this.newMethodName || !this.newMethodURL) {\r\n            alert('請填寫完整資訊');\r\n            return;\r\n        }\r\n\r\n        const payload = {\r\n            map: this.mapName,\r\n            grenade_type: this.selectedGrenade,\r\n            point_name: this.selectedPoint.name,\r\n            x: this.selectedPoint.x,\r\n            y: this.selectedPoint.y,\r\n            method: {\r\n            name: this.newMethodName,\r\n            video_url: this.newMethodURL\r\n            }\r\n        };\r\n\r\n        axios.post('/submit_method', payload)\r\n            .then(() => {\r\n            alert('送出成功，等待審核');\r\n            this.showAddForm = false;\r\n            this.newMethodName = '';\r\n            this.newMethodURL = '';\r\n            })\r\n            .catch(err => {\r\n            console.error('送出失敗', err);\r\n            alert('發生錯誤，請稍後再試');\r\n            });\r\n    },\r\n\r\n    MapClick(event){\r\n      if (!this.isAddP) return;\r\n      this.showAddForm = false;\r\n      this.showAddPForm = true;\r\n      this.videoUrl=''\r\n      const rect = event.target.getBoundingClientRect();\r\n      const x = Math.round(event.clientX - rect.left);\r\n      const y = Math.round(event.clientY - rect.top);\r\n      this.tempxy = {x,y}\r\n      this.selectedPoint=null\r\n    },\r\n    cancel_npm(){\r\n      this.tempxy = null;\r\n      this.showAddPForm = false;\r\n      this.isAddP=false;\r\n    },\r\n    submitNewPostionMethod() {\r\n        if (!this.newPostionName||!this.newMethodName || !this.newMethodURL) {\r\n            alert('請填寫完整資訊');\r\n            return;\r\n        }\r\n        const {x,y} = this.tempxy\r\n        const payload = {\r\n            map: this.mapName,\r\n            grenade_type: this.selectedGrenade,\r\n            point_name: this.newPostionName,\r\n            x,\r\n            y,\r\n            method: {\r\n            name: this.newMethodName,\r\n            video_url: this.newMethodURL\r\n            }\r\n        };\r\n\r\n        axios.post('/submit_method', payload)\r\n            .then(() => {\r\n            alert('送出成功，等待審核');\r\n            this.isAddP=false;\r\n            this.tempxy=null;\r\n            this.showAddPForm = false;\r\n            this.newPostionName = '';\r\n            this.newMethodName = '';\r\n            this.newMethodURL = '';\r\n            })\r\n            .catch(err => {\r\n            console.error('送出失敗', err);\r\n            alert('發生錯誤，請稍後再試');\r\n            });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.esports-card {\r\n  background-color: #1e2734;\r\n  border: 1px solid #2c384a;\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n  cursor: pointer;\r\n}\r\n\r\n.esports-bg {\r\n  background: linear-gradient(135deg, #0d1117, #1a1f2b);\r\n  font-family: 'Orbitron', sans-serif;\r\n}\r\n\r\n.marker {\r\n  width: 28px;\r\n  height: 28px;\r\n  background-color: #68a4ff4b;\r\n  border: 2px solid rgba(255, 255, 255, 0.8);\r\n  border-radius: 50%;\r\n  text-align: center;\r\n  line-height: 20px;\r\n  font-size: 16px;\r\n  color: white;\r\n  box-shadow: 0 0 8px rgba(1, 124, 238, 0.878);\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  transition: all 0.2s ease-in-out;\r\n  backdrop-filter: blur(2px);\r\n}\r\n.marker:hover {\r\n  transform: scale(1.15);\r\n  box-shadow: 0 0 12px rgba(102, 178, 255, 0.9);\r\n}\r\n.marker.active {\r\n  background-color: rgba(13, 202, 240, 0.85);\r\n  box-shadow: 0 0 16px rgba(13, 202, 240, 0.8), 0 0 8px rgba(255, 255, 255, 0.6);\r\n}\r\n.marker-temp {\r\n  width: 30px;\r\n  height: 30px;\r\n  background-color: rgba(255, 193, 7, 0.8);\r\n  border: 2px solid rgba(255, 255, 255, 0.8);\r\n  border-radius: 50%;\r\n  text-align: center;\r\n  line-height: 20px;\r\n  font-size: 16px;\r\n  color: black;\r\n  box-shadow: 0 0 5px rgba(255, 193, 7, 0.6);\r\n  pointer-events: none;\r\n}\r\n\r\n\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}