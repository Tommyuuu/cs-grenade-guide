{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport axios from \"axios\";\nimport NavBar from '@/components/NavBar.vue';\nexport default {\n  components: {\n    NavBar\n  },\n  name: \"AdminView\",\n  data() {\n    return {\n      pendingList: [],\n      selected: null,\n      page: 1,\n      pageSize: 10,\n      total: 0,\n      videoUrl: ''\n    };\n  },\n  created() {\n    this.fetchPending();\n  },\n  methods: {\n    fetchPending() {\n      axios.get(`/pending_methods_paginated?page=${this.page}&size=${this.pageSize}`).then(res => {\n        this.pendingList = res.data.data;\n        this.total = res.data.total;\n      });\n    },\n    nextPage() {\n      if (this.page * this.pageSize < this.total) {\n        this.page++;\n        this.fetchPending();\n      }\n    },\n    prevPage() {\n      if (this.page > 1) {\n        this.page--;\n        this.fetchPending();\n      }\n    },\n    selectItem(name) {\n      axios.get(`/get_single_pending/${name}`).then(res => {\n        this.videoUrl = res.data.method.video_url;\n        this.selected = res.data;\n      }).catch(err => {\n        console.error('ÁÑ°Ê≥ïÂèñÂæóÂΩ±ÁâáË≥áË®äÔºö', err);\n      });\n    },\n    approve(id) {\n      axios.post(`/approve/${id}`).then(() => {\n        this.fetchPending();\n        this.removeItem(id);\n      });\n    },\n    reject(id) {\n      axios.post(`/reject/${id}`).then(() => {\n        this.fetchPending();\n        this.removeItem(id);\n      });\n    },\n    removeItem(id) {\n      this.pendingList = this.pendingList.filter(item => item.id !== id);\n      this.selected = null;\n    },\n    isYoutube(url) {\n      return url.includes('youtube.com') || url.includes('youtu.be');\n    },\n    embedYoutube(url) {\n      if (url.includes('/shorts/')) {\n        const id = url.split('/shorts/')[1].split('?')[0];\n        return `https://www.youtube.com/embed/${id}`;\n      } else if (url.includes('watch?v=')) {\n        const id = url.split('watch?v=')[1].split('&')[0];\n        return `https://www.youtube.com/embed/${id}`;\n      } else if (url.includes('youtu.be/')) {\n        const id = url.split('youtu.be/')[1].split('?')[0];\n        return `https://www.youtube.com/embed/${id}`;\n      } else {\n        return ''; // ÁÑ°ÊïàÁ∂≤ÂùÄËôïÁêÜ\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","NavBar","components","name","data","pendingList","selected","page","pageSize","total","videoUrl","created","fetchPending","methods","get","then","res","nextPage","prevPage","selectItem","method","video_url","catch","err","console","error","approve","id","post","removeItem","reject","filter","item","isYoutube","url","includes","embedYoutube","split"],"sources":["C:\\Users\\tangchi\\OneDrive\\Ê°åÈù¢\\Code\\cs-grenade-guide-main\\frontend\\src\\views\\AdminView.vue"],"sourcesContent":["<template>\n  <NavBar title=\"ÂæÖÂØ©Ê†∏ÊäïÊì≤ÊïôÂ≠∏\" />\n\n  <div class=\"detail-wrapper\"> <!-- ‚úÖ ÂåÖÊï¥È†ÅÔºåÁΩÆ‰∏≠ÊâÄÊúâÂÖßÂÆπ -->\n\n    <!-- Ëã•ÁÑ°Ë≥áÊñô -->\n    <div v-if=\"pendingList.length === 0\">ÁõÆÂâçÊ≤íÊúâÂæÖÂØ©Ê†∏ÁöÑË≥áÊñô</div>\n\n    <!-- Ë°®Ê†ºÂàóË°® -->\n    <table v-else class=\"pending-table\">\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>Âú∞Âúñ</th>\n          <th>ÈÅìÂÖ∑</th>\n          <th>Èªû‰Ωç</th>\n          <th>ÊñπÊ≥ïÂêçÁ®±</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr\n          v-for=\"(item, index) in pendingList\"\n          :key=\"item.id\"\n          @click=\"selectItem(item.method.name)\"\n          class=\"table-row\"\n        >\n          <td>{{ (page - 1) * pageSize + index + 1 }}</td>\n          <td>{{ item.map }}</td>\n          <td>{{ item.grenade_type }}</td>\n          <td>{{ item.point_name }}</td>\n          <td>\n            <a href=\"#\" @click.prevent=\"selectItem(item.method.name)\">{{ item.method.name }}</a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- ÂàÜÈ†ÅÊåâÈàï -->\n    <div class=\"pagination-controls\">\n      <button @click=\"prevPage\" :disabled=\"page === 1\">‰∏ä‰∏ÄÈ†Å</button>\n      <span>Á¨¨ {{ page }} È†Å</span>\n      <button @click=\"nextPage\" :disabled=\"page * pageSize >= total\">‰∏ã‰∏ÄÈ†Å</button>\n    </div>\n\n    <!-- üîΩ Â∑¶Âè≥‰∏¶ÊéíÂÆπÂô® -->\n    <div v-if=\"selected\" class=\"preview-flex\">\n        <!-- Â∑¶ÂÅ¥ÔºöÂΩ±ÁâáÈ†êË¶Ω -->\n        <div class=\"video-section\">\n            <h3>ÂΩ±ÁâáÈ†êË¶ΩÔºö</h3>\n            <div v-if=\"isYoutube(videoUrl)\">\n                <iframe\n                    width=\"1080\"\n                    height=\"720\"\n                    :src=\"embedYoutube(videoUrl)\"\n                    frameborder=\"0\"\n                    allowfullscreen\n                ></iframe>\n            </div>\n            <div v-else-if=\"videoUrl\">\n                <video :src=\"videoUrl\" controls width=\"400\" />\n            </div>\n        </div>\n\n        <!-- Âè≥ÂÅ¥ÔºöÂú∞ÂúñËàáÁ¥ÖÈªû -->\n        <div class=\"map-section\">\n            <h4>Âú∞ÂúñËàá‰∏üÈªûÈ†êË¶ΩÔºö</h4>\n            <div class=\"map-preview\">\n                <img \n                    :src=\"`/maps/${selected.map.toLowerCase()}.png`\" alt=\"map\" />\n                <div\n                    class=\"red-dot\"\n                    :style=\"{ left: selected.x + 'px', top: selected.y + 'px' }\"\n                ></div>\n            </div>\n        </div>\n    </div>\n\n    <div v-if=\"selected\">\n        <div class=\"info-block\">\n            <p><strong>Âú∞ÂúñÔºö</strong>{{ selected.map }}</p>\n            <p><strong>ÈÅìÂÖ∑Ôºö</strong>{{ selected.grenade_type }}</p>\n            <p><strong>Èªû‰ΩçÔºö</strong>{{ selected.point_name }}</p>\n            <p><strong>ÊñπÊ≥ïÂêçÁ®±Ôºö</strong>{{ selected.method.name }}</p>\n\n            <div class=\"actions\">\n                <button @click=\"approve(selected.id)\">‚úÖ ÂêåÊÑè</button>\n                <button @click=\"reject(selected.id)\">‚ùå ÊãíÁµï</button>\n            </div>\n        </div>\n    </div>\n\n  </div>\n</template>\n\n\n<script>\nimport axios from \"axios\";\nimport NavBar from '@/components/NavBar.vue'\nexport default {\n  components: { NavBar },\n  name: \"AdminView\",\n  data() {\n    return {\n      pendingList: [],\n      selected: null,\n      page: 1,\n      pageSize: 10,\n      total: 0,\n      videoUrl: '',\n    };\n  },\n  created() {\n    this.fetchPending();\n  },\n  methods: {\n    fetchPending() {\n      axios.get(`/pending_methods_paginated?page=${this.page}&size=${this.pageSize}`)\n        .then(res => {\n            this.pendingList = res.data.data;\n            this.total = res.data.total;\n        });\n    },\n    nextPage() {\n        if (this.page * this.pageSize < this.total) {\n            this.page++;\n            this.fetchPending();\n        }\n    },\n\n    prevPage() {\n        if (this.page > 1) {\n            this.page--;\n            this.fetchPending();\n        }\n    },\n\n    selectItem(name) {\n      axios.get(`/get_single_pending/${name}`)\n        .then(res => {\n            this.videoUrl=res.data.method.video_url;\n            this.selected = res.data;\n\n        })\n        .catch(err => {\n            console.error('ÁÑ°Ê≥ïÂèñÂæóÂΩ±ÁâáË≥áË®äÔºö', err);\n        });\n    },\n    approve(id) {\n      axios.post(`/approve/${id}`)\n        .then(() => {\n          this.fetchPending();  \n          this.removeItem(id);\n        });\n    },\n    reject(id) {\n      axios.post(`/reject/${id}`)\n        .then(() => {\n          this.fetchPending();  \n          this.removeItem(id);\n        });\n    },\n    removeItem(id) {\n      this.pendingList = this.pendingList.filter(item => item.id !== id);\n      this.selected = null;\n    },\n    isYoutube(url) {\n        return url.includes('youtube.com') || url.includes('youtu.be');\n    },\n    embedYoutube(url) {\n        if (url.includes('/shorts/')) {\n        const id = url.split('/shorts/')[1].split('?')[0];\n        return `https://www.youtube.com/embed/${id}`;\n        } else if (url.includes('watch?v=')) {\n        const id = url.split('watch?v=')[1].split('&')[0];\n        return `https://www.youtube.com/embed/${id}`;\n        } else if (url.includes('youtu.be/')) {\n        const id = url.split('youtu.be/')[1].split('?')[0];\n        return `https://www.youtube.com/embed/${id}`;\n        } else {\n        return ''; // ÁÑ°ÊïàÁ∂≤ÂùÄËôïÁêÜ\n        }\n    },\n  }\n};\n</script>\n\n<style scoped>\n.detail-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  margin-top: 30px;\n}\n\n.pending-table {\n  width: 90%;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n  text-align: center;\n}\n\n.pending-table th,\n.pending-table td {\n  border: 1px solid #ccc;\n  padding: 12px 16px;\n}\n\n.pending-table th {\n  background-color: #f9f9f9;\n}\n\n.pagination-controls {\n  margin-bottom: 30px;\n}\n\n.info-block {\n  margin-top: 20px;\n  font-size: 16px;\n  line-height: 1.8;\n}\n\n.actions {\n  margin-top: 12px;\n}\n\n.actions button {\n  margin: 0 10px;\n  padding: 6px 12px;\n  font-size: 14px;\n}\n\n.preview-flex {\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  gap: 40px;\n  margin-top: 20px;\n  flex-wrap: wrap;\n}\n\n.video-section, .map-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.map-preview {\n  position: relative;\n  width: 800px;\n  /*height: 500px;*/\n  border: 2px solid #05597f;\n}\n\n.map-preview img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n\n.red-dot {\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-color: red;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  border: 2px solid black;\n}\n\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}